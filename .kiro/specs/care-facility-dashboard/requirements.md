# 介護施設向けダッシュボード - 要件定義書

## はじめに

介護施設向けの包括的なダッシュボードシステムを開発します。このシステムは職員が日常業務を効率的に管理し、利用者情報を適切に把握し、家族との連携を円滑に行うためのWebアプリケーションです。Svelte 5（Runeモード）、TypeScript、MasterCSSを使用して、モダンで保守性の高いシステムを構築します。

## 要件

### 要件1: カスタマイズ可能なホームダッシュボード

**ユーザーストーリー:** 職員として、自分の業務に必要な機能カードを自由に配置・管理できるホームダッシュボードが欲しい。そうすることで、個人の業務フローに最適化された作業環境を構築できる。

#### 受入基準

1. WHEN 職員がホームページにアクセス THEN システムは個人用にカスタマイズされたダッシュボードを表示する
2. WHEN 職員がカードをドラッグ THEN システムはカードの位置を変更できる
3. WHEN 職員がカード追加ボタンをクリック THEN システムは利用可能な機能カードの選択画面を表示する
4. WHEN 職員がカードを削除 THEN システムはカードをダッシュボードから除去し、設定を保存する
5. WHEN 職員が他のページでカード追加ボタンをクリック THEN システムはその機能のカードをホームダッシュボードに追加する

### 要件2: 利用者管理システム

**ユーザーストーリー:** 職員として、利用者の情報を効率的に閲覧・管理したい。そうすることで、適切なケアを提供し、利用者の状況を正確に把握できる。

#### 受入基準

1. WHEN 職員が利用者一覧ページにアクセス THEN システムは全利用者のリストを表示する
2. WHEN 職員が利用者をクリック THEN システムは右側にサイドメニュー形式で詳細情報を表示する
3. WHEN 職員がサイドメニューで詳細項目をクリック THEN システムは2段階目の詳細情報を展開表示する
4. WHEN 職員が全画面表示ボタンをクリック THEN システムはサイドメニューを全画面モードに切り替える
5. WHEN 職員が利用者情報を編集 THEN システムは変更を保存し、更新を反映する

### 要件3: 統計・分析機能

**ユーザーストーリー:** 管理者として、施設の運営状況を様々な期間・観点で分析したい。そうすることで、データに基づいた意思決定と業務改善を行える。

#### 受入基準

1. WHEN 管理者が統計ページにアクセス THEN システムは当日の統計情報をデフォルト表示する
2. WHEN 管理者が期間選択（日・週・月・任意）を変更 THEN システムは選択期間の統計を再計算して表示する
3. WHEN 管理者が表示項目を選択 THEN システムは対応するグラフ・チャートを動的に生成する
4. IF 新しい統計項目が追加される THEN システムは既存UIを変更せずに新項目を表示できる
5. WHEN 管理者がデータをエクスポート THEN システムは選択期間・項目のデータをCSV形式で出力する

### 要件4: 職員管理システム

**ユーザーストーリー:** 管理者として、職員の情報と勤務状況を管理したい。そうすることで、適切な人員配置と職員のサポートを行える。

#### 受入基準

1. WHEN 管理者が職員一覧ページにアクセス THEN システムは全職員のリストを表示する
2. WHEN 管理者が職員をクリック THEN システムは利用者管理と同様の2段階サイドメニューで詳細を表示する
3. WHEN 管理者が職員情報を編集 THEN システムは変更を保存し、権限に応じてアクセス制御を更新する
4. WHEN 管理者が勤務スケジュールを確認 THEN システムはカレンダー形式で職員の勤務予定を表示する
5. WHEN 職員が自分の情報を更新 THEN システムは承認フローを経て情報を更新する

### 要件5: システム設定管理

**ユーザーストーリー:** 管理者として、システムの各種設定を柔軟に変更したい。そうすることで、施設の運営方針や要件変更に対応できる。

#### 受入基準

1. WHEN 管理者が設定ページにアクセス THEN システムは現在の設定値を表示する
2. WHEN 管理者が設定を変更 THEN システムは入力値を検証し、有効な場合のみ保存する
3. WHEN 管理者がトグル設定を変更 THEN システムは即座に設定を反映し、関連機能の有効/無効を切り替える
4. IF 新しい設定項目が追加される THEN システムは既存の設定UIに統合して表示する
5. WHEN 管理者が設定をリセット THEN システムはデフォルト値に戻し、確認ダイアログを表示する

### 要件6: 家族連携・管理機能

**ユーザーストーリー:** 職員として、利用者の家族と効率的にコミュニケーションを取り、レポートを管理したい。そうすることで、透明性の高いケアサービスを提供できる。

#### 受入基準

1. WHEN 職員が管理ページにアクセス THEN システムは家族ポータル連携機能を表示する
2. WHEN 職員が家族とチャット THEN システムはリアルタイムメッセージング機能を提供する
3. WHEN 職員がレポートを作成 THEN システムはテンプレートベースのレポート作成機能を提供する
4. WHEN 職員がレポートを送信 THEN システムは対象家族のポータルにレポートを配信する
5. WHEN 家族からメッセージを受信 THEN システムは職員に通知し、チャット履歴を更新する

### 要件7: 家族ポータル

**ユーザーストーリー:** 利用者の家族として、利用者の状況を確認し、職員とコミュニケーションを取りたい。そうすることで、安心してケアサービスを利用できる。

#### 受入基準

1. WHEN 家族がポータルにログイン THEN システムは利用者に関連する情報のみを表示する
2. WHEN 家族が日次レポートを確認 THEN システムは職員が作成したその日のレポートを表示する
3. WHEN 家族が職員とチャット THEN システムは担当職員とのメッセージング機能を提供する
4. WHEN 家族が過去のレポートを検索 THEN システムは日付・カテゴリで絞り込み検索機能を提供する
5. IF 利用者本人がアクセス THEN システムは本人用の簡易インターフェースを表示する

### 要件8: レスポンシブデザインとアクセシビリティ

**ユーザーストーリー:** 様々なデバイスを使用する職員・家族として、どの環境でも使いやすいシステムを利用したい。そうすることで、場所や時間を問わず必要な情報にアクセスできる。

#### 受入基準

1. WHEN ユーザーがモバイルデバイスでアクセス THEN システムはタッチ操作に最適化されたUIを表示する
2. WHEN ユーザーがタブレットでアクセス THEN システムは中間サイズに適応したレイアウトを表示する
3. WHEN 視覚に障害のあるユーザーがアクセス THEN システムはスクリーンリーダー対応のマークアップを提供する
4. WHEN ユーザーがキーボードのみで操作 THEN システムは全機能にキーボードアクセスを提供する
5. WHEN システムが読み込み中 THEN システムは適切なローディング状態とプログレス表示を提供する